<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>git 简介以及使用 | TeaHub</title><meta name="description" content="[TOC] Git 简介1.集中式 VS 分布式集中式版本控制系统 版本库是集中存放在中央服务器的，干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干活完了，再把自己的活推送给中央服务器。 集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要很久。 分布式版本控制"><meta name="keywords" content="git"><meta name="author" content="Gy"><meta name="copyright" content="Gy"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="git 简介以及使用"><meta name="twitter:description" content="[TOC] Git 简介1.集中式 VS 分布式集中式版本控制系统 版本库是集中存放在中央服务器的，干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干活完了，再把自己的活推送给中央服务器。 集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要很久。 分布式版本控制"><meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="og:type" content="article"><meta property="og:title" content="git 简介以及使用"><meta property="og:url" content="http://yoursite.com/2020/05/15/git/"><meta property="og:site_name" content="TeaHub"><meta property="og:description" content="[TOC] Git 简介1.集中式 VS 分布式集中式版本控制系统 版本库是集中存放在中央服务器的，干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干活完了，再把自己的活推送给中央服务器。 集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要很久。 分布式版本控制"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2020-05-15T06:13:31.000Z"><meta property="article:modified_time" content="2020-05-15T06:18:45.599Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/05/15/git/"><link rel="prev" title="redis 五种数据类型的简单介绍和使用" href="http://yoursite.com/2020/05/19/redis/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">2</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Git-简介"><span class="toc-number">1.</span> <span class="toc-text">Git 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-集中式-VS-分布式"><span class="toc-number">1.1.</span> <span class="toc-text">1.集中式 VS 分布式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Git-配置"><span class="toc-number">1.2.</span> <span class="toc-text">2.Git 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-获取-Git-仓库"><span class="toc-number">1.3.</span> <span class="toc-text">3.获取 Git 仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-版本回退"><span class="toc-number">1.4.</span> <span class="toc-text">4.版本回退</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-工作区和暂存区"><span class="toc-number">1.5.</span> <span class="toc-text">5.工作区和暂存区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-撤销修改"><span class="toc-number">1.6.</span> <span class="toc-text">6.撤销修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-删除文件"><span class="toc-number">1.7.</span> <span class="toc-text">7.删除文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-添加远程库"><span class="toc-number">1.8.</span> <span class="toc-text">8.添加远程库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分支管理"><span class="toc-number">2.</span> <span class="toc-text">分支管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-创建与合并分支"><span class="toc-number">2.1.</span> <span class="toc-text">1.创建与合并分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-解决冲突"><span class="toc-number">2.2.</span> <span class="toc-text">2.解决冲突</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-分支管理策略"><span class="toc-number">2.3.</span> <span class="toc-text">3.分支管理策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Bug分支"><span class="toc-number">2.4.</span> <span class="toc-text">4.Bug分支</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">TeaHub</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">git 简介以及使用</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-15 14:13:31"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-05-15 14:18:45"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-15</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>[TOC]</p>
<h2 id="Git-简介"><a href="#Git-简介" class="headerlink" title="Git 简介"></a>Git 简介</h2><h3 id="1-集中式-VS-分布式"><a href="#1-集中式-VS-分布式" class="headerlink" title="1.集中式 VS 分布式"></a>1.集中式 VS 分布式</h3><p><strong>集中式版本控制系统</strong></p>
<p>版本库是集中存放在中央服务器的，干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干活完了，再把自己的活推送给中央服务器。</p>
<p>集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要很久。</p>
<p><strong>分布式版本控制系统</strong></p>
<p>分布式版本控制没有 “中央服务器” ，<strong>每个人的电脑上都是一个完整的版本库</strong>，这样，工作的时候就不需要联网了，因为版本就在自己的电脑上。</p>
<p>在实际使用分布式版本控制系统的时候，通常也有一台充当 “中央服务器” 的电脑，但这个 服务器的作用仅仅是用来方便 “交换” 大家的修改。</p>
<h3 id="2-Git-配置"><a href="#2-Git-配置" class="headerlink" title="2.Git 配置"></a>2.Git 配置</h3><p>通过以下命令查看所有的配置以及它们所在的文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list --show-origin</span><br></pre></td></tr></table></figure>

<p><strong>用户信息</strong></p>
<p>安装完Git之后，要做的第一件事就是设置你的用户名和邮件地址。每一个Git提交都会使用这些信息，它们会写入到你的每一次提交中，不可更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"John Doe"</span></span><br><span class="line">$ git config --global user.email johndoe@example.com</span><br></pre></td></tr></table></figure>

<p>如果使用了 –global 选项，那么该命令只需要运行一次，因为之后Git都会使用那些信息。当你想针对特定项目使用不同的用户名称与邮件地址时，可以在那个项目目录下运行没有 –global 选项的命令来配置。</p>
<p><strong>文本编辑器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.editor <span class="string">"'C:/Program Files/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"</span></span><br></pre></td></tr></table></figure>



<h3 id="3-获取-Git-仓库"><a href="#3-获取-Git-仓库" class="headerlink" title="3.获取 Git 仓库"></a>3.获取 Git 仓库</h3><p>通常有 2 中获取 Git 项目仓库的方式：</p>
<ul>
<li>将尚未进行版本控制的本地目录转换为 Git 仓库；</li>
<li>从其他服务器 克隆 一个已存在的 Git 仓库。</li>
</ul>
<p> <strong>在已存在的目录中初始化仓库</strong></p>
<p>首先需要进入该项目目录中，然后执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>



<p><strong>把文件添加到版本库</strong></p>
<p>所有版本控制系统，只能跟踪文本文件的改动，比如 TXT文件，网页，所有的程序代码等等，Git 也不例外。</p>
<p>图片、视频这些二进制文件，虽然也能由版本控制系统管理，但没法跟踪文件的变化。</p>
<ol>
<li><p>在仓库中新建一个 readme.txt 文件,内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure>
</li>
<li><p>用命令 <strong>git add</strong> 告诉Git，把文件添加到仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add readme.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>用命令 <strong>git commit</strong> 告诉Git，把文件提交到仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">"wrote a readme file"</span></span><br><span class="line">[master (root-commit) d5349ab] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>我们继续修改 readme.txt 文件，改成如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software.</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在运行 <strong>git status</strong> 命令查看结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure>

<p><strong>git status</strong> 命令直接让我们时刻掌握仓库当前的状态，上面命令输出告诉我们，readme.txt 被修改过了，但还没有准备提交修改。</p>
<p>虽然 Git 告诉我们 readme.txt 被修改了，但如果能看看具体修改了什么内容，自然是很好的。比如放假回来，已经记不清上次怎么修改 readme.txt ，所以需要使用 <strong>git diff</strong> 这个命令看看</p>
</li>
<li><p>现在运行 <strong>git diff</strong> 命令查看结果</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt</span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 3a94755..d124525 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-﻿Git is a version control system.</span><br><span class="line">+﻿Git is a distributed  version control system.</span><br><span class="line"> Git is free software.</span><br><span class="line">\ No newline at end of file</span><br></pre></td></tr></table></figure>

<p>git diff 顾名思义就是查看difference，显示的格式正是Unix通用的diff格式，可以从上面的命令输出看到，我们在第一行添加了一个 distributed 单词。</p>
</li>
</ol>
<h3 id="4-版本回退"><a href="#4-版本回退" class="headerlink" title="4.版本回退"></a>4.版本回退</h3><ol>
<li><p>继续修改 readme.txt 文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed  version control system.</span><br><span class="line">Git is free software under GPL.</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m <span class="string">"append GPL"</span></span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在运行 <strong>git log</strong> 命令查看历史记录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">commit 34c2b531bb6b3bd1db8b0f6b6e92f8ea453c0023 (HEAD -&gt; master)</span><br><span class="line">Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">Date:   Thu May 14 17:10:15 2020 +0800</span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line">commit 87b32e639f67b8204a96f5013cd77e1e6a1699e3</span><br><span class="line">Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">Date:   Thu May 14 16:39:29 2020 +0800</span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit d5349ab5f1890dcc2450495eefcb9feddcc121b4</span><br><span class="line">Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">Date:   Thu May 14 16:11:33 2020 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure>

<p>git log 命令查看从最近到最远的提交日志，我们可以看到3次提交，最近的一次是 append GPL，上一次是 add distributed，最早的一次是 wrote a readme file。</p>
<p>如果嫌输出信息太多，可以加上 –pretty=oneline参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">34c2b531bb6b3bd1db8b0f6b6e92f8ea453c0023 (HEAD -&gt; master) append GPL</span><br><span class="line">87b32e639f67b8204a96f5013cd77e1e6a1699e3 add distributed</span><br><span class="line">d5349ab5f1890dcc2450495eefcb9feddcc121b4 wrote a readme file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>git reset</strong> 命令版本回退</p>
<p>首先，Git 必须知道当前版本是哪个版本，在 Git 中，用 HEAD 表示当前版本，也就是最新的提交 34c2b53 ，上一个版本就是 HEAD^ ，上上一个版本就是 HEAD^^，当然往上 100 个版本写100个^比较容易数不过来，所以写成 HEAD~100。</p>
<p>现在，我们要把当前版本 append GPL 回退到上一个版本 add distributed，就可以使用 git reset 命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line">HEAD is now at 87b32e6 add distributed</span><br></pre></td></tr></table></figure>

<p>现在再去查看 readme.txt 的内容是不是版本 add distributed。</p>
<p>要是我们想再回到 append GPL，只要上面的命令行窗口还没有关掉，我们可以找到 append GPL 的commit id，然后执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard 34c2b531bb6b</span><br><span class="line">HEAD is now at 34c2b53 append GPL</span><br></pre></td></tr></table></figure>

<p>再查看文件，修改到了 append GPL 的文件状态。</p>
<p>假如，回退到了某个版本，关掉了电脑，第二天早上就后悔，想恢复到新版本怎么办？找不到新版本的 commit  id 怎么办？</p>
<p>在 Git 中，总是有后悔药可以吃的。当我们用 git reset –hard HEAD^  回退到 add distributed 版本时，再想恢复到 append GPL ，就必须找到append GPL 的commit id。Git 提供了 <strong>git reflog</strong> 用来记录我们的每一次命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">34c2b53 (HEAD -&gt; master) HEAD@&#123;0&#125;: reset: moving to 34c2b531bb6b</span><br><span class="line">87b32e6 HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">34c2b53 (HEAD -&gt; master) HEAD@&#123;2&#125;: commit: append GPL</span><br><span class="line">87b32e6 HEAD@&#123;3&#125;: commit: add distributed</span><br><span class="line">d5349ab HEAD@&#123;4&#125;: commit (initial): wrote a readme file</span><br></pre></td></tr></table></figure>

<p>从输出可知，append GPL 的 commit id 是 34c2b53，现在我们再执行git reset –hard 34c2b53 就可以恢复到 append GPL 的文本状态。</p>
<p>Git 的版本回退速度非常快，因为 Git 在内部有个指向当前版本的 HEAD 指针，当我们回退版本的时候，Git 仅仅是把 HEAD 从指向 append GPL </p>
</li>
</ol>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514191027201.png" alt="image-20200514191027201"></p>
<p>​    所以，我们让 HEAD 指向哪个版本号，就会把当前版本定位在哪。</p>
<h3 id="5-工作区和暂存区"><a href="#5-工作区和暂存区" class="headerlink" title="5.工作区和暂存区"></a>5.工作区和暂存区</h3><p><strong>工作区（Working Directory）</strong></p>
<p>就是电脑里能看到的工程所在的目录</p>
<p><strong>版本库（Repository）</strong></p>
<p>工作区有一个隐藏目录 <strong>.git</strong>，这个不算工作区，而是 Git 的版本库。</p>
<p>Git 的版本库里存了很多东西，其中最重要的就是称为 <strong>stage（或者叫index）</strong>的<strong>暂存区</strong>，还有 Git 为我们自动创建的第一个分支 master，以及指向 master 的一个指针叫 HEAD。</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514193602272.png" alt="image-20200514193602272"></p>
<p>前面说到我们把文件往 Git 版本库里添加的时候，是分两步执行的：</p>
<p>第一步使用 git add 把文件添加进去，实际上就是把文件修改添加到暂存区；</p>
<p>第二步是使用 git commit 提交更改，实际上就是把暂存区的所有内容提交到当前分支。</p>
<p>因为我们创建 Git 版本库时，Git自动为我们创建了一个 master 分支，所以，现在，git commit 就是往 master 分支上提交更改。</p>
<h3 id="6-撤销修改"><a href="#6-撤销修改" class="headerlink" title="6.撤销修改"></a>6.撤销修改</h3><p>场景一：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令 <strong>git checkout – readme.txt</strong>。 git checkout –file 命令中的 – 很重要，没有–，就变成了 切换到另一个分支的命令。</p>
<p>场景二：当你不但乱改了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令 <strong>git reset HEAD readme.txt</strong>，就回到了场景一，第二步按照场景一操作。</p>
<p>场景三：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考上文的4。</p>
<h3 id="7-删除文件"><a href="#7-删除文件" class="headerlink" title="7.删除文件"></a>7.删除文件</h3><p>在 Git 中，删除也是一个修改操作，我们先添加一个新文件 test.txt 到 Git 并且提交：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git add test.txt</span><br><span class="line">$ git commit -m <span class="string">"add test.txt"</span></span><br><span class="line">[master 6420c02] add test.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 test.txt</span><br></pre></td></tr></table></figure>

<p>然后删除工程目录下的 test.txt 文件，git status 命令会告诉我们哪些文件被删除了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add/rm &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        deleted:    test.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure>

<p>现在我们有2个选择，一是确实是要从版本库中删除该文件，那就用命令 <strong>git rm</strong> 删掉，并且 <strong>git commit</strong>；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">"remove test.txt"</span></span><br><span class="line">[master 5b6e60e] remove test.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 test.txt</span><br></pre></td></tr></table></figure>

<p>现在，文件就从版本库中被删除了。</p>
<p>另一种情况是删错了，因为版本库里还有，我们可以通过 git checkout – test.txt 把误删的文件恢复到最新的版本</p>
<p><strong>git checkout – file</strong> 其实是用版本库里的版本替换工作区的版本，无论工作区修改还是删除，都可以“一键还原”。</p>
<h3 id="8-添加远程库"><a href="#8-添加远程库" class="headerlink" title="8.添加远程库"></a>8.添加远程库</h3><p>首先，我们再 Github 上创建一个仓库，我们可以从这个仓库克隆出新的仓库，也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到 Github 仓库。</p>
<p>要关联一个远程库，使用命令<code>git remote add origin git@server-name:path/repo-name.git</code>；</p>
<p>添加后，远程库的名字就是origin，这是Git的默认的叫法，也可以改成别的，但是origin这个名字一看就知道是远程库。</p>
<p>关联后，使用命令<code>git push -u origin master</code>第一次推送master分支的所有内容；</p>
<p>把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p>
<p>由于远程库是空的，我们第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。</p>
<p>此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；</p>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><h3 id="1-创建与合并分支"><a href="#1-创建与合并分支" class="headerlink" title="1.创建与合并分支"></a>1.创建与合并分支</h3><p>每次提交，Git 都把他们串成一条时间线，这条时间线就是一个分支。截止目前为止，只有一条时间线，在 Git 里，这个分支叫主分支，即 master 分支。 master指向提交，HEAD 指向的就是当前分支 。</p>
<p>一开始的时候，<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，以及当前分支的提交点：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514205259348.png" alt="image-20200514205259348"></p>
<p>每次提交，<code>master</code>分支都会向前移动一步，这样，随着你不断提交，<code>master</code>分支的线也越来越长。</p>
<p>当我们创建新的分支，例如<code>dev</code>时，Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514205335461.png" alt="image-20200514205335461"></p>
<p>Git创建一个分支很快，因为除了增加一个<code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化！</p>
<p>不过，从现在开始，对工作区的修改和提交就是针对<code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，而<code>master</code>指针不变：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514205409796.png" alt="image-20200514205409796"></p>
<p>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514205437602.png" alt="image-20200514205437602"></p>
<p>所以Git合并分支也很快！就改改指针，工作区内容也不变！</p>
<p>合并完分支后，甚至可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一条<code>master</code>分支：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200514205502586.png" alt="image-20200514205502586"></p>
<ol>
<li><p>首先，我们创建 <code>dev</code> 分支，然后切换到 <code>dev</code> 分支 ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line">Switched to a new branch <span class="string">'dev'</span></span><br></pre></td></tr></table></figure>

<p><code>git checkout</code> 命令加上 <code>-b</code> 表示 创建并切换分支，相当于以下 2 条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch dev</span><br><span class="line">$ git checkout dev</span><br><span class="line">Switched to branch <span class="string">'dev'</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p>   <code>git branch</code> 查看当前分支，他会列出所有的分支，当前分支前面会用一个 <code>*</code> 标记</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>

<p>   这时，我们就可以对 <code>dev</code>分支上正常提交，比如对 <code>readme.txt</code> 做个修改，加上一行：</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is quick.</span><br></pre></td></tr></table></figure>

<p>   然后提交：</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m <span class="string">"branch test"</span></span><br><span class="line">[dev ce8a79d] branch <span class="built_in">test</span></span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>   现在 <code>dev</code> 分支的工作完成，我们切回到 <code>master</code> 分支：</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br></pre></td></tr></table></figure>

<p>   切换回 <code>master</code> 分支后，刚才添加的内容不见了，因为那个是在 <code>dev</code> 分支上，而 <code>master</code> 此刻的提交点并没有改变。</p>
<p>   <img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200515095742710.png" alt="image-20200515095742710"></p>
<p>现在，我们把 <code>dev</code> 的工作成果合并到 <code>master</code> 分支上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge dev</span><br><span class="line">Updating 5b6e60e..ce8a79d</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.txt | 3 ++-</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p><code>git merge</code> 用于合并指定分支到当前分支。合并后，再查看 readme.txt 的内容就和 <code>dev</code> 分支的最新提交是完全一样的。</p>
<p>注意上面的 <code>Fast-forward</code> 信息，Git 告诉我们，这次合并是 “快进模式” ，也就是把 <code>master</code> 指向 <code>dev</code> 的当前提交，所以合并速度非常快。</p>
<p>当然，并不是每次合并都能<code>Fast-forward</code>，后边还会介绍其他方式的合并。</p>
<p>合并完成后，就可以删除<code>dev</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d dev</span><br><span class="line">Deleted branch dev (was ce8a79d).</span><br></pre></td></tr></table></figure>



<p>如果要丢弃一个没有被合并过的分支，可以通过<code>git branch -D</code>强行删除。</p>
<h3 id="2-解决冲突"><a href="#2-解决冲突" class="headerlink" title="2.解决冲突"></a>2.解决冲突</h3><ol>
<li><p>我们新建一个分支 <code>feature1</code> ，然后再新的分支上继续开发新功能，然后进行提交，完成后，我们切换到<code>master</code>  分支，再master分支上继续进行开发新功能，然后进行提交。</p>
<p>现在<code>master</code>分支和<code>feature1</code>分支上各自都有新的提交，变成了下图所示：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200515101608917.png" alt="image-20200515101608917"></p>
</li>
</ol>
<p>这种情况下，Git 无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突。</p>
<p>首先我们先进行分支合并</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge feature1</span><br><span class="line">Auto-merging readme.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> readme.txt</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>

<p>Git 告诉我们，readme.txt 文件存在冲突，必须手动解决冲突后再提交。 <code>git status</code> 也可以告诉我们冲突的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">You have unmerged paths.</span><br><span class="line">  (fix conflicts and run <span class="string">"git commit"</span>)</span><br><span class="line">  (use <span class="string">"git merge --abort"</span> to abort the merge)</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to mark resolution)</span><br><span class="line"></span><br><span class="line">        both modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure>

<p>我们查看readme.txt 文件的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed  version control system.</span><br><span class="line">Git is free software under GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br><span class="line">Creating a new branch is quick.</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">Creating a new branch is quick &amp; simple.</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Creating a new branch is quick AND simple.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span><br></pre></td></tr></table></figure>

<p>Git用<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code>=======</code>，<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记出不同分支的内容，我们修改如下后保存然后进行提交</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is quick and simple.</span><br></pre></td></tr></table></figure>

<p>现在，<code>master</code>分支和<code>feature1</code>分支变成了下图所示：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200515102448080.png" alt="image-20200515102448080"></p>
<p>用带参数的<code>git log --graph</code>  也可以看到分支的合并情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph --pretty&#x3D;oneline --abbrev-commit</span><br><span class="line">*   5453431 (HEAD -&gt; master) conflict fixed</span><br><span class="line">|\</span><br><span class="line">| * 456a5a1 (feature1) AND simple</span><br><span class="line">* | bdef790 &amp; simple</span><br><span class="line">|&#x2F;</span><br><span class="line">* ce8a79d branch test</span><br><span class="line">* 5b6e60e remove test.txt</span><br><span class="line">* 6420c02 add test.txt</span><br><span class="line">* fc8b342 append of files</span><br><span class="line">* 73f928a git tracks changes</span><br><span class="line">* 34c2b53 append GPL</span><br><span class="line">* 87b32e6 add distributed</span><br><span class="line">* d5349ab wrote a readme file</span><br><span class="line"></span><br><span class="line">$ git log --graph</span><br><span class="line">*   commit 5453431c79406b26b63ce954acfa946c575d8eee (HEAD -&gt; master)</span><br><span class="line">|\  Merge: bdef790 456a5a1</span><br><span class="line">| | Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">| | Date:   Fri May 15 10:24:07 2020 +0800</span><br><span class="line">| |</span><br><span class="line">| |     conflict fixed</span><br><span class="line">| |</span><br><span class="line">| * commit 456a5a1ae0132d7d2131d2f07bfb1f53c00813ed (feature1)</span><br><span class="line">| | Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">| | Date:   Fri May 15 10:09:19 2020 +0800</span><br><span class="line">| |</span><br><span class="line">| |     AND simple</span><br><span class="line">| |</span><br><span class="line">* | commit bdef790f6b52e64d98c810c9c1a14cd682096c1d</span><br><span class="line">|&#x2F;  Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">|   Date:   Fri May 15 10:10:45 2020 +0800</span><br><span class="line">|</span><br><span class="line">|       &amp; simple</span><br><span class="line">|</span><br><span class="line">* commit ce8a79dbdac34254ed6c6de4551a1d8cd040c4da</span><br><span class="line">| Author: huangguiyin &lt;173886032@qq.com&gt;</span><br><span class="line">| Date:   Fri May 15 09:50:39 2020 +0800</span><br><span class="line">|</span><br><span class="line">:</span><br></pre></td></tr></table></figure>

<p>最后，删除<code>feature1</code> 分支</p>
<h3 id="3-分支管理策略"><a href="#3-分支管理策略" class="headerlink" title="3.分支管理策略"></a>3.分支管理策略</h3><p>通常，合并分支时，如果可能，Git 会用 <code>Fast-forward</code>模式，但这种模式下，删除分支后，会丢掉分支信息。</p>
<p>如果要强制禁用<code>Fast-forward</code> 模式，Git 就会在 merge 时生成一个新的 commit，这样从分支历史上就可以看出一个分支信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m <span class="string">"merge with no-ff"</span> dev</span><br><span class="line">Merge made by the <span class="string">'recursive'</span> strategy.</span><br><span class="line"> readme.txt | 3 ++-</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>因为本次合并要创建一个新的commit，所以加上<code>-m</code>参数，把commit描述写进去。</p>
<p>合并后，我们用<code>git log</code>看看分支历史：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line">*   6b2f12f (HEAD -&gt; master) merge with no-ff</span><br><span class="line">|\</span><br><span class="line">| * 7726f19 (dev) no ff</span><br><span class="line">|/</span><br><span class="line">* 84e5897 <span class="built_in">test</span> ff</span><br><span class="line">*   5453431 conflict fixed</span><br><span class="line">|\</span><br><span class="line">| * 456a5a1 (feature1) AND simple</span><br><span class="line">* | bdef790 &amp; simple</span><br><span class="line">|/</span><br><span class="line">* ce8a79d branch <span class="built_in">test</span></span><br><span class="line">* 5b6e60e remove test.txt</span><br><span class="line">* 6420c02 add test.txt</span><br><span class="line">* fc8b342 append of files</span><br><span class="line">* 73f928a git tracks changes</span><br><span class="line">* 34c2b53 append GPL</span><br><span class="line">* 87b32e6 add distributed</span><br><span class="line">* d5349ab wrote a readme file</span><br></pre></td></tr></table></figure>

<p>可以看到，不使用<code>Fast forward</code>模式，merge后就像这样：</p>
<p><img src="C:%5CUsers%5Chuangguiyin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200515105129855.png" alt="image-20200515105129855"></p>
<h3 id="4-Bug分支"><a href="#4-Bug分支" class="headerlink" title="4.Bug分支"></a>4.Bug分支</h3><p>软件开发中，bug就像家常便饭，有了bug就需要修复。在 Git 中，由于分支是如此的强大，所以每个bug都可以通过一个新的临时分支来修复，修复后，合并分支，然后将临时分支删除。</p>
<p>当我们已经再 <code>dev</code>分支上进行开发，此时，来了一个新的 bug 需要修复，但 <code>dev</code> 上的修改暂时还没有完成任务，暂时没法提交，但这时我们必须要马上解决 bug ，怎么办？</p>
<p>幸好，Git 还提供了一个  <code>stash</code> 功能，可以把当前工作现场“储藏”起来，等以后恢复现场继续工作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on dev: 3e4201a aaaaaa</span><br></pre></td></tr></table></figure>

<p>现在，用 <code>git status</code>查看工作区，就是干净的（除非有没有被Git管理的文件）因此，可以放心的新建分支修复bug。</p>
<p>首先我们确定要从哪个分支修复bug，假定需要在 <code>master</code> 分支上修复，就从 <code>master</code>上创建临时分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line"></span><br><span class="line">$ git checkout -b bugFix</span><br><span class="line">Switched to a new branch <span class="string">'bugFix'</span></span><br></pre></td></tr></table></figure>

<p>现在修复bug，需要把“Git is free software …”改为“Git is a free software …”，然后提交;修复完成后，切换到<code>master</code>分支，并完成合并，最后删除<code>bugFix</code>分支：</p>
<p>然后我们切回 <code>dev</code> 分支，然后执行 git status 命令 发现工作区是干净的，刚才的工作现场到哪去了？ 这时，我们执行 <code>git stash list</code> 命令看看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on dev: 3e4201a aaaaaa</span><br></pre></td></tr></table></figure>

<p>工作现场还在，Git把stash内容存在某个地方了，但是需要恢复一下，有两个办法：</p>
<p>一是用<code>git stash apply</code>恢复，但是恢复后，stash内容并不删除，你需要用<code>git stash drop</code>来删除；</p>
<p>另一种方式是用<code>git stash pop</code>，恢复的同时把stash内容也删了：</p>
<p>你可以多次stash，恢复的时候，先用<code>git stash list</code>查看，然后恢复指定的stash，用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>



<p>dev分支早期也是从master分支分出来的，在master上修复了bug后，dev分支上也需要修复同样的bug。</p>
<p>我们只想复制bug修复提交所做的修改，并不是把整个master分支 merge 过来。</p>
<p>此时，我们可以使用 <code>git cherry-pick &lt;commit id&gt;</code> 这个命令，让我们直接能复制一个特定的提交到当前分支，避免重复劳动。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Gy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/05/15/git/">http://yoursite.com/2020/05/15/git/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">TeaHub</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/git/">git</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/05/19/redis/"><img class="prev_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">redis 五种数据类型的简单介绍和使用</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Gy</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script></body></html>